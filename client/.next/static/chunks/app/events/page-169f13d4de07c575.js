(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[634],{4572:(e,t,s)=>{Promise.resolve().then(s.bind(s,1605))},6046:(e,t,s)=>{"use strict";var a=s(6658);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},1605:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(5155),r=s(2115),n=s(6046),o=s(8173),l=s.n(o);function c(){let[e,t]=(0,r.useState)([]),[s,o]=(0,r.useState)(""),[c,i]=(0,r.useState)(!1),u=(0,n.useRouter)();async function d(e){try{let e=localStorage.getItem("token");if(!e){u.push("/login");return}let s=await fetch("http://localhost:8000/events",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}),a=await s.json();Array.isArray(a)?t(a):t([])}catch(e){console.error("Error fetching events:",e.message)}}async function h(s){try{try{let a=localStorage.getItem("token"),r=await fetch("http://localhost:8000/events/search/?=".concat(s),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}}),n=await r.json();console.log(n),Array.isArray(n)?(t(n),console.log(e)):t([])}catch(e){console.error("Error fetching events:",e.message)}}catch(e){}}(0,r.useEffect)(()=>{d()},[]);let p=e.map(e=>(0,a.jsxs)("div",{className:"p-6 rounded-lg shadow-lg mb-4",children:[(0,a.jsx)(l(),{href:"events/"+e.id,className:"text-2xl font-semibold text-purple-500",children:e.title},e.id),(0,a.jsx)("p",{className:"text-lg mt-2",children:e.description}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:e.location}),(0,a.jsx)("span",{className:"text-sm text-purple-300",children:e.genre}),(0,a.jsx)("br",{}),(0,a.jsxs)("span",{className:"text-sm text-gray-500 mt-2",children:[new Date(e.startdate).toLocaleDateString("en-US"),"-",new Date(e.enddate).toLocaleDateString("en-US")]})]},e.id));return(0,a.jsxs)("div",{className:"min-h-screen py-12 px-4",children:[(0,a.jsx)("h1",{className:"text-4xl font-extrabold text-center text-purple-500 mb-8",children:"Events Page"}),(0,a.jsxs)("div",{className:"flex justify-center mb-6",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search for events...",onChange:function(e){o(e.target.value)},className:"w-full max-w-md px-4 py-2 border text-black border-purple-500 rounded-lg focus:outline-none focus:ring-purple-400"}),(0,a.jsx)("button",{onClick:function(){รง,h(s)},className:"px-4 py-2 bg-purple-700 text-white font-semibold rounded-lg hover:bg-purple-500 transition duration-300",children:"Search"})]}),(0,a.jsx)("div",{className:"max-w-3xl mx-auto",children:p})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[173,441,517,358],()=>t(4572)),_N_E=e.O()}]);